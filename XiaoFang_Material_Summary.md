#  　　 XiaoFang_ Material    　 Summary
## 1. 主要问题
 １．１　ｍｏｎｇｏ数据库中的存储文件没有创建查询的索引，当查询数据量大是占用ｃｐｕ很大，导致服务器卡顿。

 １．２　使用ｖｉｍ命令编辑文件后需要检查文件中是否存在多余空格或者没对齐的问题。
## 2. 解决方案
### ２．１　给数据库的记录添加索引
```
ｓｈｏｗ　ｄｂｓ；／＊显示数据库列表＊／

ｕｓｅ　ｄｂＮａｍｅ；　／＊切换数据库＊／

ｓｈｏｗ　ｃｏｌｌｅｃｔｉｏｎｓ；／＊显示表集合＊／

ｄｂ．ｃｏｌｌｅｃｔｉｏｎ．ｇｅｔＩｎｄｅｘｅｓ（）；　／＊查询当前所用数据库的所有索引＊／

ｄｂ．ｃｏｌｌｅｃｔｉｏｎ．ｃｒｅａｔｅＩｎｄｅｘ（｛＂ｆｉｅｌｄ１＂：１，＂ｆｉｅｌｄ２＂：－１｝）；／＊为字段创建索引支持单个和联合索引，多个字段之间用逗号隔开，还可以指定字段的升序和降序＊／

ｄｂ．ｃｏｌｌｅｃｔｉｏｎ．ｄｒｏｐＩｎｄｅｘｅｓ（）；／＊删除所有索引＊／
```
###  ２．２　文件以ｓｅｒｖｉｃｅ方式启动，通过
```
ｓｙｓｔｅｍｃｔｌ　　ｓｔａｔｕｓ　　　ｓｅｒｖｉｃｅ
```
或者
```
ｊｏｕｒｎａｌｃｔｌ　－ｆ
```

　查看错误日志，来找到问题，进行调试。
　　　　　　　
##  ３　Ｌｉｎｕｘ 命令补充
### ３．１　ｎｅｔｓｔａｔ指令：用来打印Linux中网络系统的状态信息
#### ３．１．１常见参数
```
-a或--all：显示所有连线中的Socket；
-A<网络类型>或--<网络类型>：列出该网络类型连线中的相关地址；
-c或--continuous：持续列出网络状态；
-C或--cache：显示路由器配置的快取信息；
-e或--extend：显示网络其他相关信息；
-F或--fib：显示FIB；
-g或--groups：显示多重广播功能群组组员名单；
-h或--help：在线帮助；
-i或--interfaces：显示网络界面信息表单；
-l或--listening：显示监控中的服务器的Socket；
-M或--masquerade：显示伪装的网络连线；
-n或--numeric：直接使用ip地址，而不通过域名服务器；
-N或--netlink或--symbolic：显示网络硬件外围设备的符号连接名称；
-o或--timers：显示计时器；
-p或--programs：显示正在使用Socket的程序识别码和程序名称；
-r或--route：显示Routing Table；
-s或--statistice：显示网络工作信息统计表；
-t或--tcp：显示TCP传输协议的连线状况；
-u或--udp：显示UDP传输协议的连线状况；
-v或--verbose：显示指令执行过程；
-V或--version：显示版本信息；
-w或--raw：显示RAW传输协议的连线状况；
-x或--unix：此参数的效果和指定"-A unix"参数相同；
--ip或--inet：此参数的效果和指定"-A inet"参数相同。
提示：LISTEN和LISTENING的状态只有用-a或者-l才能看到

```
#### ３．１．２　常见指令
查看某个服务的运行端口（如ｓｓｈ）
    
    ｎｅｔｓｔａｔ　－ａｌｎｐ｜ｇｒｅｐ　ｓｓｈ

查看运行在某个端口的进程（如　８０）
    
    ｎｅｔｓｔａｔ　－ａｌｎ｜ｇｒｅｐ　８０
   
### ３．２　ｐｓ（Ｐｒｏｃｅｓｓ　Ｓｔａｔｕｓ）：用于报告当前系统的进程状态
#### ３．２．１　常见参数
```
-a：显示所有终端机下执行的程序，除了阶段作业领导者之外。
a：显示现行终端机下的所有程序，包括其他用户的程序。
-A：显示所有程序。
-c：显示CLS和PRI栏位。
c：列出程序时，显示每个程序真正的指令名称，而不包含路径，选项或常驻服务的标示。
-C<指令名称>：指定执行指令的名称，并列出该指令的程序的状况。
-d：显示所有程序，但不包括阶段作业领导者的程序。
-e：此选项的效果和指定"A"选项相同。
e：列出程序时，显示每个程序所使用的环境变量。
-f：显示UID,PPIP,C与STIME栏位。
f：用ASCII字符显示树状结构，表达程序间的相互关系。
-g<群组名称>：此选项的效果和指定"-G"选项相同，当亦能使用阶段作业领导者的名称来指定。
g：显示现行终端机下的所有程序，包括群组领导者的程序。
-G<群组识别码>：列出属于该群组的程序的状况，也可使用群组名称来指定。
h：不显示标题列。
-H：显示树状结构，表示程序间的相互关系。
-j或j：采用工作控制的格式显示程序状况。
-l或l：采用详细的格式来显示程序状况。
L：列出栏位的相关信息。
-m或m：显示所有的执行绪。
n：以数字来表示USER和WCHAN栏位。
-N：显示所有的程序，除了执行ps指令终端机下的程序之外。
-p<程序识别码>：指定程序识别码，并列出该程序的状况。
p<程序识别码>：此选项的效果和指定"-p"选项相同，只在列表格式方面稍有差异。
r：只列出现行终端机正在执行中的程序。
-s<阶段作业>：指定阶段作业的程序识别码，并列出隶属该阶段作业的程序的状况。
s：采用程序信号的格式显示程序状况。
S：列出程序时，包括已中断的子程序资料。
-t<终端机编号>：指定终端机编号，并列出属于该终端机的程序的状况。
t<终端机编号>：此选项的效果和指定"-t"选项相同，只在列表格式方面稍有差异。
-T：显示现行终端机下的所有程序。
-u<用户识别码>：此选项的效果和指定"-U"选项相同。
u：以用户为主的格式来显示程序状况。
-U<用户识别码>：列出属于该用户的程序的状况，也可使用用户名称来指定。
U<用户名称>：列出属于该用户的程序的状况。
v：采用虚拟内存的格式显示程序状况。
-V或V：显示版本信息。
-w或w：采用宽阔的格式来显示程序状况。　
x：显示所有程序，不以终端机来区分。
X：采用旧式的Linux i386登陆格式显示程序状况。
-y：配合选项"-l"使用时，不显示F(flag)栏位，并以RSS栏位取代ADDR栏位　。
-<程序识别码>：此选项的效果和指定"p"选项相同。
--cols<每列字符数>：设置每列的最大字符数。
--columns<每列字符数>：此选项的效果和指定"--cols"选项相同。
--cumulative：此选项的效果和指定"S"选项相同。
--deselect：此选项的效果和指定"-N"选项相同。
--forest：此选项的效果和指定"f"选项相同。
--headers：重复显示标题列。
--help：在线帮助。
--info：显示排错信息。
--lines<显示列数>：设置显示画面的列数。
--no-headers：此选项的效果和指定"h"选项相同，只在列表格式方面稍有差异。
--group<群组名称>：此选项的效果和指定"-G"选项相同。
--Group<群组识别码>：此选项的效果和指定"-G"选项相同。
--pid<程序识别码>：此选项的效果和指定"-p"选项相同。
--rows<显示列数>：此选项的效果和指定"--lines"选项相同。
--sid<阶段作业>：此选项的效果和指定"-s"选项相同。
--tty<终端机编号>：此选项的效果和指定"-t"选项相同。
--user<用户名称>：此选项的效果和指定"-U"选项相同。
--User<用户识别码>：此选项的效果和指定"-U"选项相同。
--version：此选项的效果和指定"-V"选项相同。
--widty<每列字符数>：此选项的效果和指定"-cols"选项相同。
```
#### ３．２．２　常用指令
查询某个特定的进程的相关信息：

　  ｐｓ　－ａｕｘ｜ｇｒｅｐ　ｐｓｎａｍｅ

－ａｕｘ与　－ｅｆ：两者的输出结果差别不大，但展示风格不同。aux是BSD风格，-ef是System V风格。这是次要的区别，一个影响使用的区别是aux会截断command列，而-ef不会。当结合grep时这种区别会影响到结果。


## ４　[每天两个ｌｉｎｕｘ命令](http://man.linuxde.net/)

    

 





